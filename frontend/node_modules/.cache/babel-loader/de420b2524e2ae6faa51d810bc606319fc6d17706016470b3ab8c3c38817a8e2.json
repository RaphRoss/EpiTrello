{"ast":null,"code":"import _objectSpread from\"/home/balghar/Repository/Tec_3/Simulated_work/Epitrello-SIMULATED-/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _process$env$REACT_AP;import React,{useState,useEffect}from'react';import{DragDropContext}from'react-beautiful-dnd';import Board from'./components/Board';import Modal from'./components/Modal';import CardDetailModal from'./components/CardDetailModal';import CreateBoardModal from'./components/CreateBoardModal';import Notifications from'./components/Notifications';import Login from'./components/Login';import ThemeToggle from'./components/ThemeToggle';import{ThemeProvider}from'./context/ThemeContext';import{boardsApi,listsApi,cardsApi,uploadsApi,templatesApi}from'./services/api';import io from'socket.io-client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SOCKET_URL=((_process$env$REACT_AP=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace('/api',''))||'http://localhost:3001';function App(){const[boards,setBoards]=useState([]);const[currentBoard,setCurrentBoard]=useState(null);const[lists,setLists]=useState([]);const[cards,setCards]=useState([]);const[showBoardModal,setShowBoardModal]=useState(false);const[selectedCard,setSelectedCard]=useState(null);const[loading,setLoading]=useState(true);const[socket,setSocket]=useState(null);const[user,setUser]=useState(null);const[showLogin,setShowLogin]=useState(false);// Check for existing auth on mount\nuseEffect(()=>{const token=localStorage.getItem('token');const savedUser=localStorage.getItem('user');if(token&&savedUser){setUser(JSON.parse(savedUser));}else{setShowLogin(true);}},[]);const handleLogin=userData=>{setUser(userData);setShowLogin(false);};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setUser(null);setShowLogin(true);};// Initialize socket connection\nuseEffect(()=>{const newSocket=io(SOCKET_URL);setSocket(newSocket);return()=>newSocket.close();},[]);// Handle socket events\nuseEffect(()=>{if(!socket||!currentBoard)return;socket.emit('join-board',currentBoard.id);socket.on('card-created',card=>{setCards(prev=>[...prev,card]);});socket.on('card-updated',updatedCard=>{setCards(prev=>prev.map(c=>c.id===updatedCard.id?updatedCard:c));});socket.on('card-deleted',cardId=>{setCards(prev=>prev.filter(c=>c.id!==cardId));});socket.on('list-created',list=>{setLists(prev=>[...prev,list]);});socket.on('list-updated',updatedList=>{setLists(prev=>prev.map(l=>l.id===updatedList.id?updatedList:l));});socket.on('list-deleted',listId=>{setLists(prev=>prev.filter(l=>l.id!==listId));setCards(prev=>prev.filter(c=>c.listId!==listId));});return()=>{socket.emit('leave-board',currentBoard.id);socket.off('card-created');socket.off('card-updated');socket.off('card-deleted');socket.off('list-created');socket.off('list-updated');socket.off('list-deleted');};},[socket,currentBoard]);useEffect(()=>{loadBoards();},[]);useEffect(()=>{if(currentBoard){loadLists(currentBoard.id);}},[currentBoard]);useEffect(()=>{if(lists.length>0){loadAllCards();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[lists]);const loadBoards=async()=>{try{const response=await boardsApi.getAll();setBoards(response.data);if(response.data.length>0){setCurrentBoard(response.data[0]);}}catch(error){console.error('Error loading boards:',error);}finally{setLoading(false);}};const loadLists=async boardId=>{try{const response=await listsApi.getByBoardId(boardId);setLists(response.data.sort((a,b)=>a.position-b.position));}catch(error){console.error('Error loading lists:',error);}};const loadAllCards=async()=>{try{const allCards=[];for(const list of lists){const response=await cardsApi.getByListId(list.id);allCards.push(...response.data);}setCards(allCards.sort((a,b)=>a.position-b.position));}catch(error){console.error('Error loading cards:',error);}};const createBoard=async data=>{try{let response;if(data.templateId){// Create board from template\nresponse=await templatesApi.createBoard(data.templateId,{name:data.name,userId:user===null||user===void 0?void 0:user.id});}else{// Create blank board\nresponse=await boardsApi.create({name:data.name,description:data.description});}const newBoard=response.data;setBoards([...boards,newBoard]);setCurrentBoard(newBoard);setShowBoardModal(false);// Reload lists and cards for the new board\nawait loadLists(newBoard.id);}catch(error){console.error('Error creating board:',error);alert('Failed to create board');}};const deleteBoard=async()=>{if(!currentBoard)return;if(!window.confirm(\"Are you sure you want to delete \\\"\".concat(currentBoard.name,\"\\\" and all its lists and cards?\"))){return;}try{await boardsApi.delete(currentBoard.id);const updatedBoards=boards.filter(b=>b.id!==currentBoard.id);setBoards(updatedBoards);setCurrentBoard(updatedBoards.length>0?updatedBoards[0]:null);setLists([]);setCards([]);if(socket&&currentBoard){socket.emit('board-deleted',{boardId:currentBoard.id});}}catch(error){console.error('Error deleting board:',error);alert('Failed to delete board');}};const createList=async name=>{if(!currentBoard)return;try{const response=await listsApi.create({title:name,boardId:currentBoard.id,position:lists.length});setLists([...lists,response.data]);if(socket){socket.emit('list-created',{boardId:currentBoard.id,list:response.data});}}catch(error){console.error('Error creating list:',error);}};const createCard=async(cardData,listId)=>{try{const listCards=cards.filter(card=>card.listId===listId);// Upload attachments if any\nlet uploadedAttachments=[];if(cardData.attachments&&cardData.attachments.length>0){const cardId=Date.now().toString();const uploadPromises=cardData.attachments.map(async att=>{try{const uploadResponse=await uploadsApi.upload({fileName:att.fileName,fileData:att.fileData,cardId:cardId});return{fileName:att.fileName,storedName:uploadResponse.data.storedName,size:att.size};}catch(err){console.error('Error uploading file:',err);return null;}});uploadedAttachments=(await Promise.all(uploadPromises)).filter(a=>a!==null);}const response=await cardsApi.create({title:typeof cardData==='string'?cardData:cardData.title,description:typeof cardData==='object'?cardData.description:'',dueDate:typeof cardData==='object'?cardData.dueDate:null,attachments:uploadedAttachments,listId,position:listCards.length});setCards([...cards,response.data]);if(socket&&currentBoard){socket.emit('card-created',{boardId:currentBoard.id,card:response.data});}}catch(error){console.error('Error creating card:',error);}};const deleteCard=async cardId=>{try{await cardsApi.delete(cardId);setCards(cards.filter(c=>c.id!==cardId));if(socket&&currentBoard){socket.emit('card-deleted',{boardId:currentBoard.id,cardId});}}catch(error){console.error('Error deleting card:',error);}};const handleCardClick=card=>{setSelectedCard(card);};const handleCardUpdate=async updatedCard=>{try{const response=await cardsApi.update(updatedCard.id,updatedCard);setCards(cards.map(card=>card.id===updatedCard.id?response.data:card));setSelectedCard(response.data);if(socket&&currentBoard){socket.emit('card-updated',{boardId:currentBoard.id,card:response.data});}}catch(error){console.error('Error updating card:',error);alert('Failed to update card');}};const deleteList=async listId=>{try{await listsApi.delete(listId);// Also remove all cards associated with this list\nsetCards(cards.filter(c=>c.listId!==listId));setLists(lists.filter(l=>l.id!==listId));if(socket&&currentBoard){socket.emit('list-deleted',{boardId:currentBoard.id,listId});}}catch(error){console.error('Error deleting list:',error);}};const onDragEnd=async result=>{const{destination,source,draggableId}=result;if(!destination)return;if(destination.droppableId===source.droppableId&&destination.index===source.index){return;}// Convert draggableId string to number for comparison\nconst cardId=parseInt(draggableId,10);const card=cards.find(c=>c.id===cardId);if(!card)return;const updatedCards=cards.filter(c=>c.id!==cardId);const newCard=_objectSpread(_objectSpread({},card),{},{listId:parseInt(destination.droppableId,10),position:destination.index});setCards([...updatedCards,newCard].sort((a,b)=>a.position-b.position));try{await cardsApi.update(cardId,{listId:parseInt(destination.droppableId,10),position:destination.index});}catch(error){console.error('Error updating card:',error);// Revert on error\nsetCards(cards);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:\"Loading...\"});}if(showLogin){return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})});}return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:onDragEnd,children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Notifications,{cards:cards}),/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u2728 Epitrello\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[user&&!user.isGuest&&/*#__PURE__*/_jsxs(\"span\",{style:{padding:'8px 16px',background:'var(--bg-hover)',borderRadius:'var(--border-radius-sm)',fontSize:'14px',fontWeight:'600',color:'var(--text-primary)',display:'flex',alignItems:'center',gap:'8px',border:'1px solid var(--border-color)'},children:[\"\\uD83D\\uDC64 \",user.username]}),boards.length>0&&/*#__PURE__*/_jsx(\"select\",{value:(currentBoard===null||currentBoard===void 0?void 0:currentBoard.id)||'',onChange:e=>{const boardId=parseInt(e.target.value,10);const board=boards.find(b=>b.id===boardId);setCurrentBoard(board);},style:{padding:'10px 16px',borderRadius:'var(--border-radius-sm)',border:'2px solid var(--border-color)',background:'var(--bg-secondary)',color:'var(--text-primary)',fontSize:'14px',fontWeight:'600',cursor:'pointer',minWidth:'180px',transition:'all var(--transition-speed) ease'},children:boards.map(board=>/*#__PURE__*/_jsx(\"option\",{value:board.id,children:board.name},board.id))}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>setShowBoardModal(true),children:\"\\u2795 New Board\"}),currentBoard&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:deleteBoard,style:{backgroundColor:'var(--danger)',borderColor:'var(--danger)',color:'white'},title:\"Delete current board\",children:\"\\uD83D\\uDDD1\\uFE0F Delete\"}),/*#__PURE__*/_jsx(ThemeToggle,{}),user&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:handleLogout,children:\"Logout\"})]})]}),currentBoard?/*#__PURE__*/_jsx(Board,{board:currentBoard,lists:lists,cards:cards,onCreateList:createList,onCreateCard:createCard,onDeleteCard:deleteCard,onDeleteList:deleteList,onCardClick:handleCardClick}):/*#__PURE__*/_jsxs(\"div\",{style:{color:'var(--text-inverted)',textAlign:'center',marginTop:'100px',padding:'40px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'36px',marginBottom:'16px',fontWeight:'700'},children:\"Welcome to Epitrello! \\uD83C\\uDF89\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'18px',marginBottom:'32px',opacity:0.9},children:\"Create your first board to get started.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>setShowBoardModal(true),style:{fontSize:'16px',padding:'14px 32px'},children:\"Create Board\"})]}),showBoardModal&&/*#__PURE__*/_jsx(CreateBoardModal,{onClose:()=>setShowBoardModal(false),onSubmit:createBoard}),selectedCard&&/*#__PURE__*/_jsx(CardDetailModal,{card:selectedCard,userId:user===null||user===void 0?void 0:user.id,onClose:()=>setSelectedCard(null),onUpdate:handleCardUpdate})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","DragDropContext","Board","Modal","CardDetailModal","CreateBoardModal","Notifications","Login","ThemeToggle","ThemeProvider","boardsApi","listsApi","cardsApi","uploadsApi","templatesApi","io","jsx","_jsx","jsxs","_jsxs","SOCKET_URL","_process$env$REACT_AP","process","env","REACT_APP_API_URL","replace","App","boards","setBoards","currentBoard","setCurrentBoard","lists","setLists","cards","setCards","showBoardModal","setShowBoardModal","selectedCard","setSelectedCard","loading","setLoading","socket","setSocket","user","setUser","showLogin","setShowLogin","token","localStorage","getItem","savedUser","JSON","parse","handleLogin","userData","handleLogout","removeItem","newSocket","close","emit","id","on","card","prev","updatedCard","map","c","cardId","filter","list","updatedList","l","listId","off","loadBoards","loadLists","length","loadAllCards","response","getAll","data","error","console","boardId","getByBoardId","sort","a","b","position","allCards","getByListId","push","createBoard","templateId","name","userId","create","description","newBoard","alert","deleteBoard","window","confirm","concat","delete","updatedBoards","createList","title","createCard","cardData","listCards","uploadedAttachments","attachments","Date","now","toString","uploadPromises","att","uploadResponse","upload","fileName","fileData","storedName","size","err","Promise","all","dueDate","deleteCard","handleCardClick","handleCardUpdate","update","deleteList","onDragEnd","result","destination","source","draggableId","droppableId","index","parseInt","find","updatedCards","newCard","_objectSpread","className","children","onLogin","isGuest","style","padding","background","borderRadius","fontSize","fontWeight","color","display","alignItems","gap","border","username","value","onChange","e","target","board","cursor","minWidth","transition","onClick","backgroundColor","borderColor","onCreateList","onCreateCard","onDeleteCard","onDeleteList","onCardClick","textAlign","marginTop","marginBottom","opacity","onClose","onSubmit","onUpdate"],"sources":["/home/balghar/Repository/Tec_3/Simulated_work/Epitrello-SIMULATED-/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport Board from './components/Board';\nimport Modal from './components/Modal';\nimport CardDetailModal from './components/CardDetailModal';\nimport CreateBoardModal from './components/CreateBoardModal';\nimport Notifications from './components/Notifications';\nimport Login from './components/Login';\nimport ThemeToggle from './components/ThemeToggle';\nimport { ThemeProvider } from './context/ThemeContext';\nimport { boardsApi, listsApi, cardsApi, uploadsApi, templatesApi } from './services/api';\nimport io from 'socket.io-client';\n\nconst SOCKET_URL = process.env.REACT_APP_API_URL?.replace('/api', '') || 'http://localhost:3001';\n\nfunction App() {\n  const [boards, setBoards] = useState([]);\n  const [currentBoard, setCurrentBoard] = useState(null);\n  const [lists, setLists] = useState([]);\n  const [cards, setCards] = useState([]);\n  const [showBoardModal, setShowBoardModal] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [user, setUser] = useState(null);\n  const [showLogin, setShowLogin] = useState(false);\n\n  // Check for existing auth on mount\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const savedUser = localStorage.getItem('user');\n    if (token && savedUser) {\n      setUser(JSON.parse(savedUser));\n    } else {\n      setShowLogin(true);\n    }\n  }, []);\n\n  const handleLogin = (userData) => {\n    setUser(userData);\n    setShowLogin(false);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setUser(null);\n    setShowLogin(true);\n  };\n\n  // Initialize socket connection\n  useEffect(() => {\n    const newSocket = io(SOCKET_URL);\n    setSocket(newSocket);\n\n    return () => newSocket.close();\n  }, []);\n\n  // Handle socket events\n  useEffect(() => {\n    if (!socket || !currentBoard) return;\n\n    socket.emit('join-board', currentBoard.id);\n\n    socket.on('card-created', (card) => {\n      setCards(prev => [...prev, card]);\n    });\n\n    socket.on('card-updated', (updatedCard) => {\n      setCards(prev => prev.map(c => c.id === updatedCard.id ? updatedCard : c));\n    });\n\n    socket.on('card-deleted', (cardId) => {\n      setCards(prev => prev.filter(c => c.id !== cardId));\n    });\n\n    socket.on('list-created', (list) => {\n      setLists(prev => [...prev, list]);\n    });\n\n    socket.on('list-updated', (updatedList) => {\n      setLists(prev => prev.map(l => l.id === updatedList.id ? updatedList : l));\n    });\n\n    socket.on('list-deleted', (listId) => {\n      setLists(prev => prev.filter(l => l.id !== listId));\n      setCards(prev => prev.filter(c => c.listId !== listId));\n    });\n\n    return () => {\n      socket.emit('leave-board', currentBoard.id);\n      socket.off('card-created');\n      socket.off('card-updated');\n      socket.off('card-deleted');\n      socket.off('list-created');\n      socket.off('list-updated');\n      socket.off('list-deleted');\n    };\n  }, [socket, currentBoard]);\n\n  useEffect(() => {\n    loadBoards();\n  }, []);\n\n  useEffect(() => {\n    if (currentBoard) {\n      loadLists(currentBoard.id);\n    }\n  }, [currentBoard]);\n\n  useEffect(() => {\n    if (lists.length > 0) {\n      loadAllCards();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [lists]);\n\n  const loadBoards = async () => {\n    try {\n      const response = await boardsApi.getAll();\n      setBoards(response.data);\n      if (response.data.length > 0) {\n        setCurrentBoard(response.data[0]);\n      }\n    } catch (error) {\n      console.error('Error loading boards:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadLists = async (boardId) => {\n    try {\n      const response = await listsApi.getByBoardId(boardId);\n      setLists(response.data.sort((a, b) => a.position - b.position));\n    } catch (error) {\n      console.error('Error loading lists:', error);\n    }\n  };\n\n  const loadAllCards = async () => {\n    try {\n      const allCards = [];\n      for (const list of lists) {\n        const response = await cardsApi.getByListId(list.id);\n        allCards.push(...response.data);\n      }\n      setCards(allCards.sort((a, b) => a.position - b.position));\n    } catch (error) {\n      console.error('Error loading cards:', error);\n    }\n  };\n\n  const createBoard = async (data) => {\n    try {\n      let response;\n      if (data.templateId) {\n        // Create board from template\n        response = await templatesApi.createBoard(data.templateId, {\n          name: data.name,\n          userId: user?.id\n        });\n      } else {\n        // Create blank board\n        response = await boardsApi.create({ \n          name: data.name, \n          description: data.description \n        });\n      }\n      \n      const newBoard = response.data;\n      setBoards([...boards, newBoard]);\n      setCurrentBoard(newBoard);\n      setShowBoardModal(false);\n      \n      // Reload lists and cards for the new board\n      await loadLists(newBoard.id);\n    } catch (error) {\n      console.error('Error creating board:', error);\n      alert('Failed to create board');\n    }\n  };\n\n  const deleteBoard = async () => {\n    if (!currentBoard) return;\n    \n    if (!window.confirm(`Are you sure you want to delete \"${currentBoard.name}\" and all its lists and cards?`)) {\n      return;\n    }\n\n    try {\n      await boardsApi.delete(currentBoard.id);\n      const updatedBoards = boards.filter(b => b.id !== currentBoard.id);\n      setBoards(updatedBoards);\n      setCurrentBoard(updatedBoards.length > 0 ? updatedBoards[0] : null);\n      setLists([]);\n      setCards([]);\n      \n      if (socket && currentBoard) {\n        socket.emit('board-deleted', { boardId: currentBoard.id });\n      }\n    } catch (error) {\n      console.error('Error deleting board:', error);\n      alert('Failed to delete board');\n    }\n  };\n\n  const createList = async (name) => {\n    if (!currentBoard) return;\n    \n    try {\n      const response = await listsApi.create({ \n        title: name,\n        boardId: currentBoard.id,\n        position: lists.length \n      });\n      setLists([...lists, response.data]);\n      if (socket) {\n        socket.emit('list-created', { boardId: currentBoard.id, list: response.data });\n      }\n    } catch (error) {\n      console.error('Error creating list:', error);\n    }\n  };\n\n  const createCard = async (cardData, listId) => {\n    try {\n      const listCards = cards.filter(card => card.listId === listId);\n      \n      // Upload attachments if any\n      let uploadedAttachments = [];\n      if (cardData.attachments && cardData.attachments.length > 0) {\n        const cardId = Date.now().toString();\n        const uploadPromises = cardData.attachments.map(async (att) => {\n          try {\n            const uploadResponse = await uploadsApi.upload({\n              fileName: att.fileName,\n              fileData: att.fileData,\n              cardId: cardId\n            });\n            return {\n              fileName: att.fileName,\n              storedName: uploadResponse.data.storedName,\n              size: att.size\n            };\n          } catch (err) {\n            console.error('Error uploading file:', err);\n            return null;\n          }\n        });\n        uploadedAttachments = (await Promise.all(uploadPromises)).filter(a => a !== null);\n      }\n\n      const response = await cardsApi.create({ \n        title: typeof cardData === 'string' ? cardData : cardData.title,\n        description: typeof cardData === 'object' ? cardData.description : '',\n        dueDate: typeof cardData === 'object' ? cardData.dueDate : null,\n        attachments: uploadedAttachments,\n        listId,\n        position: listCards.length \n      });\n      setCards([...cards, response.data]);\n      if (socket && currentBoard) {\n        socket.emit('card-created', { boardId: currentBoard.id, card: response.data });\n      }\n    } catch (error) {\n      console.error('Error creating card:', error);\n    }\n  };\n\n  const deleteCard = async (cardId) => {\n    try {\n      await cardsApi.delete(cardId);\n      setCards(cards.filter(c => c.id !== cardId));\n      if (socket && currentBoard) {\n        socket.emit('card-deleted', { boardId: currentBoard.id, cardId });\n      }\n    } catch (error) {\n      console.error('Error deleting card:', error);\n    }\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  };\n\n  const handleCardUpdate = async (updatedCard) => {\n    try {\n      const response = await cardsApi.update(updatedCard.id, updatedCard);\n      setCards(cards.map(card => card.id === updatedCard.id ? response.data : card));\n      setSelectedCard(response.data);\n      \n      if (socket && currentBoard) {\n        socket.emit('card-updated', { boardId: currentBoard.id, card: response.data });\n      }\n    } catch (error) {\n      console.error('Error updating card:', error);\n      alert('Failed to update card');\n    }\n  };\n\n  const deleteList = async (listId) => {\n    try {\n      await listsApi.delete(listId);\n      // Also remove all cards associated with this list\n      setCards(cards.filter(c => c.listId !== listId));\n      setLists(lists.filter(l => l.id !== listId));\n      if (socket && currentBoard) {\n        socket.emit('list-deleted', { boardId: currentBoard.id, listId });\n      }\n    } catch (error) {\n      console.error('Error deleting list:', error);\n    }\n  };\n\n  const onDragEnd = async (result) => {\n    const { destination, source, draggableId } = result;\n\n    if (!destination) return;\n\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    }\n\n    // Convert draggableId string to number for comparison\n    const cardId = parseInt(draggableId, 10);\n    const card = cards.find(c => c.id === cardId);\n    if (!card) return;\n\n    const updatedCards = cards.filter(c => c.id !== cardId);\n    const newCard = {\n      ...card,\n      listId: parseInt(destination.droppableId, 10),\n      position: destination.index\n    };\n\n    setCards([...updatedCards, newCard].sort((a, b) => a.position - b.position));\n\n    try {\n      await cardsApi.update(cardId, {\n        listId: parseInt(destination.droppableId, 10),\n        position: destination.index\n      });\n    } catch (error) {\n      console.error('Error updating card:', error);\n      // Revert on error\n      setCards(cards);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"app\">Loading...</div>;\n  }\n\n  if (showLogin) {\n    return (\n      <ThemeProvider>\n        <Login onLogin={handleLogin} />\n      </ThemeProvider>\n    );\n  }\n\n  return (\n    <ThemeProvider>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <div className=\"app\">\n          <Notifications cards={cards} />\n          <header className=\"header\">\n            <h1>‚ú® Epitrello</h1>\n            <div className=\"header-actions\">\n              {user && !user.isGuest && (\n                <span style={{ \n                  padding: '8px 16px',\n                  background: 'var(--bg-hover)',\n                  borderRadius: 'var(--border-radius-sm)',\n                  fontSize: '14px',\n                  fontWeight: '600',\n                  color: 'var(--text-primary)',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px',\n                  border: '1px solid var(--border-color)'\n                }}>\n                  üë§ {user.username}\n                </span>\n              )}\n              {boards.length > 0 && (\n                <select \n                  value={currentBoard?.id || ''} \n                  onChange={(e) => {\n                    const boardId = parseInt(e.target.value, 10);\n                    const board = boards.find(b => b.id === boardId);\n                    setCurrentBoard(board);\n                  }}\n                  style={{ \n                    padding: '10px 16px',\n                    borderRadius: 'var(--border-radius-sm)',\n                    border: '2px solid var(--border-color)',\n                    background: 'var(--bg-secondary)',\n                    color: 'var(--text-primary)',\n                    fontSize: '14px',\n                    fontWeight: '600',\n                    cursor: 'pointer',\n                    minWidth: '180px',\n                    transition: 'all var(--transition-speed) ease'\n                  }}\n                >\n                  {boards.map(board => (\n                    <option key={board.id} value={board.id}>{board.name}</option>\n                  ))}\n                </select>\n              )}\n              <button \n                className=\"btn-primary\" \n                onClick={() => setShowBoardModal(true)}\n              >\n                ‚ûï New Board\n              </button>\n              {currentBoard && (\n                <button \n                  className=\"btn-secondary\" \n                  onClick={deleteBoard}\n                  style={{ \n                    backgroundColor: 'var(--danger)', \n                    borderColor: 'var(--danger)',\n                    color: 'white'\n                  }}\n                  title=\"Delete current board\"\n                >\n                  üóëÔ∏è Delete\n                </button>\n              )}\n              <ThemeToggle />\n              {user && (\n                <button \n                  className=\"btn-secondary\" \n                  onClick={handleLogout}\n                >\n                  Logout\n                </button>\n              )}\n            </div>\n          </header>\n\n          {currentBoard ? (\n            <Board \n              board={currentBoard}\n              lists={lists}\n              cards={cards}\n              onCreateList={createList}\n              onCreateCard={createCard}\n              onDeleteCard={deleteCard}\n              onDeleteList={deleteList}\n              onCardClick={handleCardClick}\n            />\n          ) : (\n            <div style={{ \n              color: 'var(--text-inverted)', \n              textAlign: 'center', \n              marginTop: '100px',\n              padding: '40px'\n            }}>\n              <h2 style={{ \n                fontSize: '36px', \n                marginBottom: '16px',\n                fontWeight: '700'\n              }}>\n                Welcome to Epitrello! üéâ\n              </h2>\n              <p style={{ \n                fontSize: '18px', \n                marginBottom: '32px',\n                opacity: 0.9\n              }}>\n                Create your first board to get started.\n              </p>\n              <button \n                className=\"btn-primary\" \n                onClick={() => setShowBoardModal(true)}\n                style={{ fontSize: '16px', padding: '14px 32px' }}\n              >\n                Create Board\n              </button>\n            </div>\n          )}\n\n          {showBoardModal && (\n            <CreateBoardModal\n              onClose={() => setShowBoardModal(false)}\n              onSubmit={createBoard}\n            />\n          )}\n\n          {selectedCard && (\n            <CardDetailModal\n              card={selectedCard}\n              userId={user?.id}\n              onClose={() => setSelectedCard(null)}\n              onUpdate={handleCardUpdate}\n            />\n          )}\n        </div>\n      </DragDropContext>\n    </ThemeProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}